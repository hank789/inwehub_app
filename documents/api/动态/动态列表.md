# 动态列表

## 接口地址

`/api/feed/list`

## 请求方式

`POST`

### HTTP Status Code

200

## 请求体

| name     | type     | must     | description |
|----------|:--------:|:--------:|:--------:|
| top_id   | string   | no      | 最新id,分页用,默认10条 |
| bottom_id   | string   | no      | 页脚id,分页用,默认10条 |

## feed_type类型


    const FEED_TYPE_ANSWER_PAY_QUESTION = 1;//回答专业问题
    const FEED_TYPE_ANSWER_FREE_QUESTION = 2;//回答互动问题
    const FEED_TYPE_CREATE_FREE_QUESTION = 3;//发布互动问题
    const FEED_TYPE_CREATE_PAY_QUESTION = 4;//发布专业问题
    const FEED_TYPE_SUBMIT_READHUB_ARTICLE = 5;//发布阅读文章
    const FEED_TYPE_FOLLOW_FREE_QUESTION = 6;//关注了互动问答
    const FEED_TYPE_FOLLOW_USER = 7;//关注了用户
    const FEED_TYPE_COMMENT_PAY_QUESTION = 8;//评论了专业问答
    const FEED_TYPE_COMMENT_FREE_QUESTION = 9;//评论了互动问答
    const FEED_TYPE_COMMENT_READHUB_ARTICLE = 10;//评论了阅读文章
    const FEED_TYPE_UPVOTE_PAY_QUESTION = 11;//赞了专业问答
    const FEED_TYPE_UPVOTE_FREE_QUESTION = 12;//赞了互动问答
    const FEED_TYPE_UPVOTE_READHUB_ARTICLE = 13;//赞了阅读文章

    switch ($this->feed_type) {
        case self::FEED_TYPE_ANSWER_PAY_QUESTION:
            //回答专业问题
            $url = '/ask/'.$this->data['question_id'];
            $data = [
                'title' => $this->data['question_title']
            ];
            break;
        case self::FEED_TYPE_ANSWER_FREE_QUESTION:
            //回答互动问题
            $url = '/askCommunity/interaction/'.$this->source_id;
            $data = [
                'title'     => $this->data['question_title'],
                'content'   => $this->data['answer_content']
            ];
            break;
        case self::FEED_TYPE_CREATE_FREE_QUESTION:
            //发布互动问题
            $url = '/askCommunity/interaction/answers/'.$this->data['question_id'];
            $question = Question::find($this->data['question_id']);
            $data = [
                'title' => $this->data['question_title'],
                'answer_num' => $question->answers,
                'follow_num' => $question->followers,
            ];
            break;
        case self::FEED_TYPE_CREATE_PAY_QUESTION:
            //发布专业问题
            $url = '/answer/'.$this->data['question_id'];
            $data = [
                'title' => $this->data['question_title']
            ];
            break;
        case self::FEED_TYPE_SUBMIT_READHUB_ARTICLE:
            //发布文章
            $url = '/c/'.$this->data['category_id'].'/'.$this->data['slug'];
            $data = [
                'title'     => $this->data['submission_title'],
                'img'       => $this->data['img'],
                'domain'    => $this->data['domain'],
                'comment_url' => '/c/'.$this->data['category_id'].'/'.$this->data['slug'],
                'view_url'    => $this->data['view_url']
            ];
            break;
        case self::FEED_TYPE_FOLLOW_FREE_QUESTION:
            //关注了互动问答
            $url = '/askCommunity/interaction/answers/'.$this->data['question_id'];
            $question = Question::find($this->data['question_id']);
            $data = [
                'title' => $this->data['question_title'],
                'answer_num' => $question->answers,
                'follow_num' => $question->followers,
            ];
            break;
        case self::FEED_TYPE_FOLLOW_USER:
            //关注了用户
            $follower_user = User::find($this->data['follow_user_id']);
            $url = '/share/resume/'.$follower_user->uuid;
            $data = [
                'follow_user_id'    =>    $follower_user->id,
                'follow_user_name'  =>    $follower_user->name,
                'follow_user_uuid'  =>    $follower_user->uuid,
                'follow_user_avatar'  =>    $follower_user->avatar,
                'follow_user_is_expert' => $follower_user->userData->authentication_status == 1 ? 1 : 0
            ];
            break;
        case self::FEED_TYPE_COMMENT_PAY_QUESTION:
            //评论了专业问答
            $url = $this->data['feed_url'];
            $data = [
                        'comment_content' => $comment->content,
                        'answer_user_name' => $source->user->name,
                        'question_title'   => $question->title,
                        'answer_content'   => $feed_answer_content,
                        'feed_url'         => $feed_url
                    ]
            break;
        case self::FEED_TYPE_COMMENT_FREE_QUESTION:
            //评论了互动问答
            $url = $this->data['feed_url'];
            $data = [
                        'comment_content' => $comment->content,
                        'answer_user_name' => $source->user->name,
                        'question_title'   => $question->title,
                        'answer_content'   => $feed_answer_content,
                        'feed_url'         => $feed_url
                    ]
            break;
        case self::FEED_TYPE_COMMENT_READHUB_ARTICLE:
            //评论了文章
            $url = '/c/'.$this->data['category_id'].'/'.$this->data['slug'].'?comment='.$this->data['comment_id'];
            $data = [
                'title'     => $this->data['submission_title'],
                'img'       => $this->data['img'],
                'domain'    => $this->data['domain'],
                'comment_content' => $this->data['comment_content'],
                'submission_username' => $this->data['submission_username']
            ];
            break;
        case self::FEED_TYPE_UPVOTE_PAY_QUESTION:
            //赞了专业问答
            $url = $this->data['feed_url'];
            $data = [
                        'answer_user_name' => $source->user->name,
                        'question_title'   => $question->title,
                        'answer_content'   => $feed_answer_content,
                        'feed_url'         => $feed_url
                    ]
            break;
        case self::FEED_TYPE_UPVOTE_FREE_QUESTION:
            //赞了互动问答
            $url = $this->data['feed_url'];
            $data = [
                        'answer_user_name' => $source->user->name,
                        'question_title'   => $question->title,
                        'answer_content'   => $feed_answer_content,
                        'feed_url'         => $feed_url
                    ]
            break;
        case self::FEED_TYPE_UPVOTE_READHUB_ARTICLE:
            //赞了文章
            $url = '/c/'.$this->data['category_id'].'/'.$this->data['slug'];
            $data = [
                'submission_username' => $this->data['submission_username'],
                'title'     => $this->data['submission_title'],
                'img'       => $this->data['img'],
                'domain'    => $this->data['domain'],
                'comment_url' => '/c/'.$this->data['category_id'].'/'.$this->data['slug'],
                'view_url'    => $this->data['view_url']
            ];
            break;
    }
    
    $data为返回的feed的数据结构
    
## feed的数据结构



## 返回体

```json5
{
  "status": true,
  "code": 1000,
  "message": "操作成功",
  "data": [
        {
            "id": "1",//动态id
            "title": "张红赞了互动问答",//动态标题
            "user": {
                "id": "1",
                "name": "张红",
                "uuid": "ghjkrdggfgfgfg",
                "is_expert": "0",//是否专家,0否,1是
                "avatar": "http://zhihu.hank.com:8080/image/avatar/1_middle.jpg",//用户头像地址
            },//动态发布者
            "feed": {
            
            
            },//feed数据，根据feed_type的不同，feed的数据结构不同
            "feed_type": "1",//feed类型
            "url": "/c/2",//链接地址
            "created_at": "2017-03-02 08:14:13",//创建时间
        }
  ]
}
``` 
